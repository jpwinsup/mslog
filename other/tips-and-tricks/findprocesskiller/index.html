<!DOCTYPE html>
<html lang="ja" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プロセスを終了させたプロセスを見つける</title>
    
    <link rel="icon" href="https://jpwinsup.github.io/mslog/images/favicon.ico" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
        integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    <link rel="stylesheet" href="https://jpwinsup.github.io/mslog/css/style.min.6dfb5280fd5c3bdf4b0ef814a028c2d285a9e1833ad9bb2dce4762ca9f6291e8.css" integrity="sha256-bftSgP1cO99LDvgUoCjC0oWp4YM62bstzkdiyp9ikeg=" crossorigin="anonymous">
    
</head>

<body>
    <header class="header header-color">
    <nav class="navbar">
        <ul class="navbar-list">
            
            <li class="navbar-item"><a href="https://jpwinsup.github.io/mslog/"><img class="navbar-logo" src="https://jpwinsup.github.io/mslog/images/Microsoft-logo_rgb_c-wht.webp"
                        alt="Microsoft Logo"></a></li>
            <li class="navbar-item"><a class="navbar-item-style" href="https://jpwinsup.github.io/mslog/">ホーム</a></li>
            <li class="navbar-item"><a class="navbar-item-style" href="https://cssjpn.github.io/"
                    target="_blank">サポート情報</a>
            </li>
            <li class="navbar-item"><a class="navbar-item-style" href="https://jpwinsup.github.io/blog/"
                    target="_blank">サポート ブログ</a>
            </li>
        </ul>
    </nav>
</header>

    
<div class="page-wrapper">
    <div class="sidebar sidebar-color">
    <h3 class="sidebar-header sidebar-header-style">カテゴリー</h3>
    
    
    <ul class="sidebar-list">
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/directory-service/">Directory Service</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/hyper-v/">Hyper-V</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/cluster/">クラスター</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/storage/">ストレージ</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/performance/">パフォーマンス</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/networking/">ネットワーク一般</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/wireless/">ワイヤレス ネットワーク</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/file-services/">ファイル サービス</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/uwp/">UWP</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/rdp/">リモートアクセス</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-style"
                href="https://jpwinsup.github.io/mslog/core/">コア</a></li>
        
        
        <li class="sidebar-list-item sidebar-list-item-style"><a
                class="sidebar-list-link-accent-style"
                href="https://jpwinsup.github.io/mslog/other/">その他</a></li>
        
    </ul>
    
</div>
    <div class="content content-color">
        <article>
            <h1>プロセスを終了させたプロセスを見つける</h1>
            <h3>目次</h3>
            
            <nav id="TableOfContents">
  <ul>
    <li><a href="#作業の流れ">作業の流れ</a>
      <ul>
        <li><a href="#debugging-tools-for-windows-をインストール">Debugging Tools for Windows をインストール</a></li>
        <li><a href="#gflagsexe-ツールで対象のプロセスに対しsilent-process-exit-を有効化">gflags.exe ツールで対象のプロセスに対し、Silent Process Exit を有効化</a></li>
        <li><a href="#silent-process-exit-の無効化">Silent Process Exit の無効化</a></li>
      </ul>
    </li>
  </ul>
</nav>
            <p>本記事はマイクロソフト社員によって公開されております。</p>
<p>いつも弊社製品をご利用いただきまして誠にありがとうございます。Windows プラットフォーム サポートの栗木です。</p>
<p>今回は、Debugging Tools for Windows に含まれている gflags.exe ツールにより、 <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/registry-entries-for-silent-process-exit"  target="_blank" >Silent Process Exit</a> を有効化し、対象のプロセスが他のプロセスにより、終了させられた際に、プロセス ダンプを出力する方法をご紹介します。</p>
<p>例として、Silent Process Exit を notepad.exe (メモ帳)に設定し、Taskmgr.exe (タスク マネージャー)からメモ帳を終了させると、以下のスクリーン ショットのように notepad.exe と Taskmgr.exe の2つのプロセス ダンプが出力されます。このように Silent Process Exit は、対象のプロセスがどのプロセスにより終了させられたかを調査するのに有効な機能になります。</p>
<p><img src="https://jpwinsup.github.io/mslog/other/tips-and-tricks/findprocesskiller/dump.png" alt=""></p>
<h2 id="作業の流れ">作業の流れ</h2>
<ol>
<li>Debugging Tools for Windows をインストール</li>
<li>gflags.exe ツールで対象のプロセスに対し、Silent Process Exit を有効化</li>
</ol>
<h3 id="debugging-tools-for-windows-をインストール">Debugging Tools for Windows をインストール</h3>
<p>以下の Web サイトから Windows SDK インストーラーをダウンロード＆実行し、Debugging Tools for Windows をインストールします。
Download Debugging Tools for Windows：
<a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/debugger-download-tools"  target="_blank" >https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/debugger-download-tools</a></p>
<h3 id="gflagsexe-ツールで対象のプロセスに対しsilent-process-exit-を有効化">gflags.exe ツールで対象のプロセスに対し、Silent Process Exit を有効化</h3>
<ol>
<li>
<p>管理者権限で gflags.exe を実行
対象のプロセスが、32bit アプリケーションであれば x86 フォルダの gflags.exe を 64bit アプリケーションであれば、x64 フォルダの gflags.exe を実行します。
Path の例
32bit：C:\Program Files (x86)\Windows Kits\10\Debuggers\x86\gflags.exe
64bit：C:\Program Files (x86)\Windows Kits\10\Debuggers\x64\gflags.exe
<!-- raw HTML omitted --></p>
</li>
<li>
<p><strong>Silent Process Exit</strong> タブを開き、以下の通りに設定を行います。
　Image : notepad.exe
　　　　 - Enable Silent Process Exit Monitoring を有効化
　Reporting Mode : ✓Enable Dump Collection
　Dump Folder Location : C:\SilentProcessExit　※ 事前にこちらのフォルダ作成をお願いいたします。
　Dump Type : Custom Dump
　Custom Dump Type : 2
　Dump Folder Size : 15 （既定値：制限なし）<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><img src="https://jpwinsup.github.io/mslog/other/tips-and-tricks/findprocesskiller/enabled.png" alt=""></p>
</li>
<li>
<p><strong>OK</strong> をクリックし、設定は完了です。プロセスやサーバーの再起動は必要なく、設定は即座に反映されます。<!-- raw HTML omitted --></p>
</li>
</ol>
<p>設定後は、対象のプロセスが他のプロセスにより終了させられると自動的にプロセス ダンプが出力されます。ただ、対象のプロセスが自分で通常終了した場合も、プロセスダンプが出力されますので、注意してください。
調査が終わり、プロセス ダンプの出力が必要でなくなりましたら、次の方法で Silent Process Exit の無効化してください。</p>
<h3 id="silent-process-exit-の無効化">Silent Process Exit の無効化</h3>
<p>設定に使用した gflags.exe を起動し、Image 欄に対象のプロセスを入力し、<strong>Enable Silent Process Exit Monitoring</strong> のチェックを外します。他の項目は、そのままでも、問題ございません。</p>
<p><img src="https://jpwinsup.github.io/mslog/other/tips-and-tricks/findprocesskiller/disabled.png" alt=""></p>
<p>本情報の内容（添付文書、リンク先などを含む）は、作成日時点でのものであり、予告なく変更される場合があります。</p>

        </article>
    </div>
</div>


    <footer class="footer footer-color">
    <div class="footer-container">
        
        <img class="footer-logo" src="https://jpwinsup.github.io/mslog/images/Microsoft-logo_rgb_c-wht.webp" alt="Microsoft Logo">
        <nav class="footer-links">
            <ul class="footer-links-list">
                <li class="footer-links-item"><a class="footer-links-style" href="https://jpwinsup.github.io/mslog/">ホーム</a></li>
                <li class="footer-links-item"><a class="footer-links-style" href="https://cssjpn.github.io/"
                        target="_blank">サポート情報</a></li>
                <li class="footer-links-item"><a class="footer-links-style" href="https://jpwinsup.github.io/blog/"
                        target="_blank">サポート ブログ</a></li>
            </ul>
        </nav>
    </div>
    <p class="footer-copy footer-copy-style">© 2023 Microsoft Japan Windows サポート チーム</p>
</footer>

</body>

</html>