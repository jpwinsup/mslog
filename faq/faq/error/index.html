<!doctype html><html lang=ja data-theme=light><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>実行時のエラーについて</title><link rel=icon href=https://jpwinsup.github.io/mslog/images/favicon.ico><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://jpwinsup.github.io/mslog/css/style.min.2cf2d83b70054c6a1f941ece9e04f670c1ca9e5d7906b9f613c2128026f68c85.css integrity="sha256-LPLYO3AFTGoflB7OngT2cMHKnl15Brn2E8ISgCb2jIU=" crossorigin=anonymous><script defer data-domain=jpwinsup.github.io/mslog src=https://jpwinsup-mslog-plausible.japaneast.cloudapp.azure.com/js/script.js></script></head><body><header class="header header-color"><nav class=navbar><ul class=navbar-list><li class=navbar-item><a href=https://jpwinsup.github.io/mslog/><img class=navbar-logo src=https://jpwinsup.github.io/mslog/images/Microsoft-logo_rgb_c-wht.webp alt="Microsoft Logo"></a></li><li class=navbar-item><a class=navbar-item-style href=https://jpwinsup.github.io/mslog/>ホーム</a></li><li class=navbar-item><a class=navbar-item-style href=https://cssjpn.github.io/ target=_blank>サポート情報</a></li><li class=navbar-item><a class=navbar-item-style href=https://jpwinsup.github.io/blog/ target=_blank>サポート ブログ</a></li></ul></nav></header><div class=page-wrapper><div class="sidebar sidebar-color"><h3 class="sidebar-header sidebar-header-style">カテゴリー</h3><ul class=sidebar-list><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/directory-service/>Directory Service</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/hyper-v/>Hyper-V</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/cluster/>クラスター</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/storage/>ストレージ</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/performance/>パフォーマンス</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/networking/>ネットワーク一般</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/wireless/>ワイヤレス ネットワーク</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/file-services/>ファイル サービス</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/uwp/>UWP</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/rdp/>リモートアクセス</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/core/>コア</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-style href=https://jpwinsup.github.io/mslog/other/>その他</a></li><li class="sidebar-list-item sidebar-list-item-style"><a class=sidebar-list-link-accent-style href=https://jpwinsup.github.io/mslog/faq/>FAQ</a></li></ul></div><div class="content content-color"><article><h1>実行時のエラーについて</h1><h3>目次</h3><nav id=TableOfContents><ul><li><a href=#マルウェアとして検知される問題について>マルウェアとして検知される問題について</a></li><li><a href=#署名に関連するエラーが発生する問題について>署名に関連するエラーが発生する問題について</a></li><li><a href=#update-エラーについて>Update エラーについて</a></li><li><a href=#kerneltrace-エラーについて>KernelTrace エラーについて</a></li><li><a href=#number-of-trace-session-エラーについて>Number of trace session エラーについて</a></li><li><a href=#tsszip-の実行が終了しない問題について>TSS.zip の実行が終了しない問題について</a></li></ul></nav><h2 id=マルウェアとして検知される問題について>マルウェアとして検知される問題について</h2><p>Q: TSS.zip が、マルウェアとして検知されますが安全ですか？<br>A: TSS.zip は、システムに関する情報を収集するため、セキュリティ対策ソフトウェアによっては、マルウェアとして誤認識されてしまう場合があります。しかし、TSS.zip 内のスクリプトはデジタル署名を行い改ざん防止対策を行っているため安全です。もし、マルウェアとして検知される場合は、お手数ですが除外設定をお願い致します。</p><h2 id=署名に関連するエラーが発生する問題について>署名に関連するエラーが発生する問題について</h2><p>Q: 署名に関連するエラーが発生して TSS.zip を実行することができません。<br>A: TSS.zip をダウンロードした際に Zone Identifier が付与されている可能性があります。以下のトラブルシューティングを実施してください。</p><ol><li>TSS.zip を右クリックして[プロパティ]を選択</li><li>[全般]タブの下部に[このファイルは他のコンピューターから取得したものです。このコンピューターを保護するため、このファイルへのアクセスはブロックされる可能性があります]という記載がある場合、右側の [許可する]をチェックし[OK]を押下</li><li>手順 2 の TSS.zip を解凍</li><li>既に解凍済みのフォルダがある場合、PowerShell を起動し、以下のコマンドを実行</li></ol><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Get-ChildItem -Recurse -Path &lt;<span style=color:#f85149>解凍済みフォルダ</span>&gt;\*.ps* | Unblock-File -Confirm:$false
</span></span></code></pre></div><ol start=5><li>再度、担当エンジニアから指定された TSS.zip のコマンドを実行</li></ol><h2 id=update-エラーについて>Update エラーについて</h2><p>Q: 以下のエラーが発生することがあります。どうすればいいですか？</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>[PreRequisiteCheckInStage1(<span style=color:#a5d6ff>13521</span>)] ERROR<span style=color:#f85149>:</span> TSS script is outdated more than <span style=color:#a5d6ff>30</span> days. Please -Update or download latest version<span style=color:#f85149>:</span> <span style=color:#a5d6ff>&#39;https://aka.ms/getTSS&#39;</span> or <span style=color:#a5d6ff>&#39;https://cesdiagtools.blob.core.windows.net/windows/TSS.zip&#39;</span>
</span></span></code></pre></div><p>A: 以下のトラブルシューティングを実施してください。</p><ol><li>インターネットに接続できる環境の場合、管理者権限の PowerShell もしくはコマンドプロンプトで以下のコマンドを実行</li></ol><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>.\TSS.<span style=color:#79c0ff>ps1</span> -update
</span></span></code></pre></div><ol start=2><li>インターネットに接続できない環境の場合、インターネットに接続できる環境に移動し、https://aka.ms/getTSS から最新版の TSS.zip ダウンロードし、差し替えを実施</li><li>再度、担当エンジニアから指定された TSS.zip のコマンドを実行
　　</li></ol><h2 id=kerneltrace-エラーについて>KernelTrace エラーについて</h2><p>Q: 以下のいずれかのエラーが発生することがあります。どうすればいいですか？</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>[ProcessStart(<span style=color:#a5d6ff>12095</span>)] WARNING<span style=color:#f85149>:</span> Detected below existing trace(s) 
</span></span><span style=display:flex><span>- TSS_WIN_KernelTrace 
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>[ProcessStart(<span style=color:#a5d6ff>12095</span>)] WARNING<span style=color:#f85149>:</span> Detected below existing trace(s) 
</span></span><span style=display:flex><span>- NT Kernel Logger 
</span></span></code></pre></div><p>A: 以下のトラブルシューティングを実施してください。</p><ol><li>管理者権限の PowerShell もしくはコマンドプロンプトで以下のコマンドを実行</li></ol><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>logman -ets -stop <span style=color:#a5d6ff>&#34;Circular Kernel Context Logger&#34;</span> 
</span></span><span style=display:flex><span>logman -ets -stop <span style=color:#a5d6ff>&#34;NT Kernel Logger&#34;</span> 
</span></span></code></pre></div><ol start=2><li>再度、担当エンジニアから指定された TSS.zip のコマンドを実行</li><li>手順 2 を実行してもエラーになる場合、管理者権限の PowerShell で以下のコマンドを実行</li></ol><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Set-ExecutionPolicy -scope <span style=color:#ff7b72>Process</span> -ExecutionPolicy RemoteSigned -Force 
</span></span><span style=display:flex><span>.\TSSv2.<span style=color:#79c0ff>ps1</span> -Stop -noBasiclog -noXray 
</span></span></code></pre></div><ol start=4><li>PowerShell 上で perfmon [Enter] と入力し、パフォーマンス モニターを起動</li><li>[データ コレクター セット] - [イベント トレース セッション] を選択</li><li>実行中のトレース一覧で以下の名前のトレースが実行中になっている場合、右クリックして [停止] し、その後再度右クリックして [削除]<br><strong>TSS_xxx</strong> (<em>xxx</em>は任意の文字列)</li><li>再度、担当エンジニアから指定された TSS.zip のコマンドを実行</li><li>手順 7 を実行してもエラーになる場合、エラーログを添付の上、担当エンジニアにご連絡ください。</li></ol><h2 id=number-of-trace-session-エラーについて>Number of trace session エラーについて</h2><p>Q: 以下のエラーが発生することがあります。どうすればいいですか？</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>[PreRequisiteCheckForStart(<span style=color:#a5d6ff>15584</span>)] ERROR<span style=color:#f85149>:</span> Number of trace session(xxx <span style=color:#ff7b72>for</span> TSS and xxx <span style=color:#ff7b72>for</span> existing sessions) will be xxx and it exceeds system total maximum number of session(xxx)
</span></span><span style=display:flex><span><span style=color:#f85149>※</span> xxx <span style=color:#f85149>は任意の数値</span>
</span></span></code></pre></div><p>A: 以下のトラブルシューティングを実施してください。</p><ol><li>管理者権限の PowerShell もしくはコマンドプロンプトで以下のコマンドを実行</li></ol><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>reg add HKLM\SYSTEM\CurrentControlSet\Control\WMI /v EtwMaxLoggers /t REG_DWORD /d <span style=color:#a5d6ff>256</span>
</span></span></code></pre></div><ol start=2><li>OS を再起動</li><li>再度、担当エンジニアから指定された TSS.zip のコマンドを実行</li><li>手順 3 を実行してもエラーになる場合、エラーログを添付の上、担当エンジニアにご連絡ください。</li></ol><h2 id=tsszip-の実行が終了しない問題について>TSS.zip の実行が終了しない問題について</h2><p>A: TSS.zip のログ採取の完了操作をしても実行が終了しません。どうすればいいですか？<br>Q: 対象の環境に採取すべき情報が多くある場合、完了まで時間が要することがあります。例えば、システムイベントログのファイルサイズを既定より大きくしている場合、このイベントログから採取すべき情報の検索に著しく時間を要する場合があります。このような場合も含めて、TSS.zip 実行が終了しない場合は、Ctrl+C でスクリプトの実行を止めて、担当エンジニアにご連絡ください。また、実行中のログであっても、調査が行える場合があるため、ログファイルの保存フォルダ (既定では、C:\MS_DATA) は、削除しないでください。</p></article></div></div><footer class="footer footer-color"><div class=footer-container><img class=footer-logo src=https://jpwinsup.github.io/mslog/images/Microsoft-logo_rgb_c-wht.webp alt="Microsoft Logo"><nav class=footer-links><ul class=footer-links-list><li class=footer-links-item><a class=footer-links-style href=https://jpwinsup.github.io/mslog/>ホーム</a></li><li class=footer-links-item><a class=footer-links-style href=https://cssjpn.github.io/ target=_blank>サポート情報</a></li><li class=footer-links-item><a class=footer-links-style href=https://jpwinsup.github.io/blog/ target=_blank>サポート ブログ</a></li></ul></nav></div><p class="footer-copy footer-copy-style">© 2023 Microsoft Japan Windows サポート チーム</p></footer></body></html>